<!doctype html>
<html class="x-admin-sm">

<head>
    <meta charset="UTF-8">
    <title>西安旅游-注册</title>
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
        content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <link rel="stylesheet" href="css/login.css">
    <style type="text/css">
        .checkCode {
            cursor: pointer;
            color: red;
            font-size: 15px;
            text-align: right;
            line-height: 26px;
            margin-top: -43px;
            margin-left: 230px;
            width: 100px;
            height: 35px;
        }
        .modal-container {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            z-index: 1000;
            background-color: rgba(0, 0, 0, .4);
        }

        .modal-container .modal {
            display: block;
            width: 460px;
            height: 215px;
            padding: 30px 0;
            position: absolute;
            margin: auto;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background-color: #fff;
            text-align: center;
        }

        .modal-container .icon {
            display: inline-block;
            width: 50px;
            height: 50px;
            background: url(data:image/png;base64,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) no-repeat;
        }

        .modal-container .tip {
            font-size: 14px;
            color: #666;
            margin-bottom: 26px;
            margin-top: 12px;
        }

        .modal-container .ok-btn {
            color: #fff;
            background-color: #f03d37;
            -webkit-box-shadow: 0 2px 10px -2px #f03d37;
            box-shadow: 0 2px 10px -2px #f03d37;
        }

        .modal-container .btn {
            border-radius: 100px;
            height: 42px;
            line-height: 42px;
            font-size: 16px;
            width: 260px;
            padding: 0;
            cursor: default;
        }
    </style>

    <script type="text/javascript">
        function verify_numget() {
            //62个字符 随机选择4位
            //var code_box = document.getElementById("send-verify-btn");
            var code = '0123456789qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM';
            var ch = '';
            var result = '';

            for (var i = 0; i < 4; i++) {
                var code_index = Math.round(Math.random() * 61);
                var ch = code[code_index];
                if (result.toUpperCase().indexOf(ch.toUpperCase()) > -1) {
                    i--;
                    continue;
                }
                result += ch;
            }
            return result;
        }
        var send_status = 1;
        var verify_num;
        function send_verify() {
            var ema = /[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/;
            var email = document.getElementById("email");
            if (email.value == "" || !ema.test(email.value)) {
                alert("请输入正确的邮箱!");
                return;
            }
            // if (send_status) {
            //     /*if (add_unselectable.length == 0) {
            //         alert("请先在左侧选取您的座位!");
            //         return;
            //     }*/
            //     send_status = 0;
            //     verify_num = verify_numget();
            //     var url = "../EmailServlet";
            //     if (window.XMLHttpRequest)
            //         req = new XMLHttpRequest();
            //     else if (window.ActiveXObject)
            //         req = new ActiveXObject("Microsoft.XMLHTTP");
            //     if (req) {
            //         //采用POST方式，异步传输
            //         req.open("post", url, true);
            //         req.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            //         req.onreadystatechange = verify_numget;
            //         var data = "type=send_email&email=" + email.value + "&verify_num=" + verify_num;

            //         req.send(data);
            //     }
            // }
            var btn = document.getElementById("send-verify-btn");

            var time = 60;
            var timer = null;
            btn.innerHTML = "重新发送(" + time + "s)";
            btn.style = "pointer-events: none;";
            timer = setInterval(function () {
                if (time == 1) {
                    btn.style = "";
                    clearInterval(timer);
                    btn.innerHTML = '获取验证码';
                    send_status = 1;
                }
                else {
                    time--;
                    btn.innerHTML = "重新发送(" + time + "s)";
                }
            }, 1000)
        }

        function check() {
            var username = document.getElementById("username");
            var usergender = document.getElementById("usergender");
            var password = document.getElementById("password");
            var paypassword = document.getElementById("paypassword");
            var email = document.getElementById("email");
            var verify_input = document.getElementById('verify_num');
            var username_test = /[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘'，。、]/im; 
  
            if(username.value==''||usergender.value==''||password.value==''
                ||paypassword.value==''||email.value==''||verify_input.value==''){
                alert("请确保您已经填写了完整信息！");
                return;
            }
            if (username_test.test(username.value)||username.value.length>10||username.value.length<6) {
                // 验证用户名包含特殊字符
                alert("用户名需6~10位，且不能包含特殊字符!");
                return;
            }
            if(usergender.value!='0'&&usergender.value!='1'){
                alert("性别只能填数字0(女)或1(男)!");
                return;
            }
            if(password.value.length>15||password.value.length<6){
                alert("密码需控制在6~15位！");
                return;
            }
            if(paypassword.value.length!=6||isNaN(paypassword.value)){
                alert("支付密码必须是6位纯数字！");
                return;
            }
            if (verify_input.value != verify_num) {
                alert("验证码错误，请重新发送后再试！");
                return;
            }
            
            // var url = "../LoginServlet2";
            // if (window.XMLHttpRequest)
            //     req = new XMLHttpRequest();
            // else if (window.ActiveXObject)
            //     req = new ActiveXObject("Microsoft.XMLHTTP");
            // if (req) {
            //     //采用POST方式，异步传输
            //     req.open("post", url, true);
            //     req.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            //     req.onreadystatechange = checkComplete;
            //     var data = "type=register&username="+ username.value
            //                 + "&usergender=" + usergender.value.toString()
            //                 + "&password=" + password.value
            //                 + "&paypassword=" + paypassword.value
            //                 + "&email=" + email.value;
            //     req.send(data);
            //     verify_num = verify_numget();
            // }

        }
        function register_end(){
        	var tip_message = document.getElementsByClassName("modal-container")[0];
            var tip_message_text = document.getElementsByClassName("modal")[0];

            tip_message.style.display = 'block';
            tip_message_text.style.display = 'block';
        }
        function OK() {
        	window.location = 'login.html?'
        }

        function checkComplete() {
            if (req.readyState == 4 && req.status == 200) {
                alert(req.responseText);
                sub_state = true;
            }
        }
        /*function init() {
            
        }*/
    </script>
</head>

<body class="login-bg">
    <div class="login layui-anim layui-anim-up" style="margin-top: 39px;">
        <div style="text-align:center"><img src="images/logo.jpg" width="255px" height="200px"><br><br></div>
        <div class="message" style="font-size:20px;margin-top: -20px;">请新用户认真填写以下信息:</div>
        <div id="darkbannerwrap"></div>

        <form method="post" class="layui-form" action="">
            <input type="text" id="username" name="username" placeholder="用户名: 需在6~10位，且不能包含特殊字符!" value="" class="layui-input"
                style="height: 30px;">
            <hr class="hr15">
            <input type="text" id="usergender" name="usergender" placeholder="性别: 女性填0/男性填1" value="" class="layui-input"
                style="height: 30px;">
            <hr class="hr15">
            <input type="password" id="password" name="password" placeholder="密码: 密码需控制在6~15位" value="" class="layui-input"
                style="height: 30px;">
            <hr class="hr15">
            <input type="password" id="paypassword" name="paypassword" placeholder="支付密码：必须是6位纯数字" value="" class="layui-input"
                style="height: 30px;">
            <hr class="hr15">
            <input type="text" id="email" name="email" placeholder="邮箱： 请确保邮箱格式正确" value="" class="layui-input"
                style="height: 30px;">
            <hr class="hr15">
            <input type="text" id="verify_num" name="verify_num" placeholder="验证码： 填写您的邮箱收到的验证码" value="" class="layui-input"
                style="height: 30px;">
            <hr class="hr15">
            <div class="checkCode" id="send-verify-btn" onclick="send_verify(this);">获取验证码</div>
            <input type="button" value="注册" style="font-size:18px;width:100%;" onclick="check();">
            <hr class="hr20">
            <a href="login.html">已有账号？点击去登录</a>
        </form>
        <!-- div class="modal-container">
            <div class="modal">
                <span class="icon"></span>
                <p id='tip' class="tip">恭喜你，注册成功！您的200元新人红包已存入账户余额！</p>
                <div class="ok-btn btn" onclick="OK();">立即去登录</div>
            </div>
        </div> -->
    </div>
    <!-- 底部结束 -->
</body>

</html>